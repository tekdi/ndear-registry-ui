<app-header [headerFor]='header1' [tab]='tab'></app-header>
<div *ngIf="affiliations == null" class="col-md-4 offset-md-4">
    <div class="alert alert-warning alert-dismissible my-3">
        <div class="d-flex">
            <!-- <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a> -->
            <i class="fas fa-info-circle me-3"></i>
            <div class="flex-column d-flex text-left">
                <span class="fw-bold mb-2">Setup not complete !</span>
                Please edit institute details and add
                affliation details to complete setup. 
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="d-flex flex-justify-between">
        <div>
            <h6 class="d-inline-block">Institute Details</h6>
            <a data-toggle="modal" data-target="#editProfile" class="pl-1 fs-7 text-primary-color">edit</a>
        </div>
    </div>
    <div class="card">
        <div class="card-body">
            <dl>
                <ng-template [ngIf]="institute?.instituteName">
                    <dt class="fs-7 text-grey-color">Institute Name</dt>
                    <dd><b>{{institute?.instituteName}} </b></dd>
                </ng-template>

                <ng-template [ngIf]="institute?.trust">
                    <dt class="fs-7 text-grey-color">Trust / Society / Managing Committee</dt>
                    <dd>{{institute?.trust}}</dd>
                </ng-template>
            </dl>
            <ng-template [ngIf]="institute?.email || institute?.contactNumber">
                <dl>
                    <ng-template [ngIf]="institute?.email">
                        <dt class="fs-7 text-grey-color">Email</dt>
                        <dd>{{institute?.email}}</dd>
                    </ng-template>
                    <ng-template [ngIf]="institute?.ContactNumber">
                        <dt class="fs-7 text-grey-color">Landline / Mobile</dt>
                        <dd>{{institute?.contactNumber}}</dd>
                    </ng-template>
                </dl>
            </ng-template>
            <ng-template [ngIf]="institute?.Address?.plot || institute?.Address?.street">
                <dl>
                    <ng-template [ngIf]="institute?.Address?.plot">
                        <dt class="fs-7 text-grey-color">Plot</dt>
                        <dd>{{institute?.Address?.plot}}</dd>
                    </ng-template>
                    <ng-template [ngIf]="institute?.Address?.street">
                        <dt class="fs-7 text-grey-color">Street</dt>
                        <dd>{{institute?.Address?.street}}</dd>
                    </ng-template>

                </dl>
            </ng-template>

            <ng-template [ngIf]="institute?.Address?.landmark && institute?.Address?.locality">
                <dl>
                    <ng-template [ngIf]="institute?.Address?.landmark">
                        <dt class="fs-7 text-grey-color">Landmark</dt>
                        <dd>{{institute?.Address?.landmark}}
                            <!-- <i class="fa fa-check-circle text-success" data-mdb-toggle="tooltip" title="Attested"></i> -->
                        </dd>
                    </ng-template>

                    <ng-template [ngIf]="institute?.Address?.locality">
                        <dt class="fs-7 text-grey-color">Locality</dt>
                        <dd>{{institute?.Address?.locality}}
                            <!-- <i class="fa fa-check-circle text-success" data-mdb-toggle="tooltip" title="Attested"></i> -->
                        </dd>
                    </ng-template>
                </dl>
            </ng-template>

            <ng-template [ngIf]="institute?.Address?.district && institute?.Address?.city">
            <dl>
                <ng-template [ngIf]="institute?.Address?.district">
                    <dt class="fs-7 text-grey-color">District</dt>
                    <dd>{{institute?.Address?.district}}
                        <!-- <i class="fa fa-check-circle text-success" data-mdb-toggle="tooltip" title="Attested"></i> -->
                    </dd>
                </ng-template>

                <ng-template [ngIf]="institute?.Address?.city">
                    <dt class="fs-7 text-grey-color">City</dt>
                    <dd>{{institute?.Address?.city}}
                        <!-- <i class="fa fa-check-circle text-success" data-mdb-toggle="tooltip" title="Attested"></i> -->
                    </dd>
                </ng-template>
            </dl>
            </ng-template>

            <ng-template  [ngIf]="institute?.Address?.state && institute?.Address?.pincode">
            <dl>
                <ng-template [ngIf]="institute?.Address?.state">
                    <dt class="fs-7 text-grey-color">State</dt>
                    <dd>{{institute?.Address?.state}}
                        <!-- <i class="fa fa-check-circle text-success" data-mdb-toggle="tooltip" title="Attested"></i> -->
                    </dd>
                </ng-template>
                <ng-template [ngIf]="institute?.Address?.pincode">
                    <dt class="fs-7 text-grey-color">PIN Code</dt>
                    <dd>{{institute?.Address?.pincode}}
                        <!-- <i class="fa fa-check-circle text-success" data-mdb-toggle="tooltip" title="Attested"></i> -->
                    </dd>
                </ng-template>

            </dl>
            </ng-template>
            
            <dl>
                <ng-template [ngIf]="institute?.gstin">
                    <dt class="fs-7 text-grey-color">GST IN</dt>
                    <dd>{{institute?.gstin}}</dd>
                </ng-template>
                <ng-template [ngIf]="institute?.website">
                    <dt class="fs-7 text-grey-color">Website</dt>
                    <dd><a href="{{institute?.Website}}">{{institute?.website}}</a></dd>
                </ng-template>
            </dl>
        </div>
    </div>

    <div *ngIf="institute?.affiliation == null; else affiliationBlock" class="d-flex flex-justify-between mt-20">
        <a class="text-end d-block text-primary-color blue-shade-btn" data-toggle="modal"
            data-target="#addAffiliation"><i class="fa fa-plus pr-1"></i> Affiliation Details</a>
    </div>
    <ng-template #affiliationBlock>
        <div class="d-flex flex-justify-between mt-5"  *ngIf="institute?.affiliation[0]">
            <div>
                <h6 class="d-inline-block">ID Details</h6>
                <!-- <a class="pl-1 fs-7 text-primary-color">edit</a> -->
            </div>
        </div>
        <div class="card" *ngIf="institute?.affiliation[0]">
            <div class="card-body">
                <dl *ngIf="institute?.affiliation[0] || institute?.affiliation[0]?.affiliationNumber">
                    <dt class="fs-7 text-grey-color">Affiliation Board</dt>
                    <dd>{{institute?.affiliation[0]?.board}}
                        <!-- <img *ngIf="affiliation.attested == 'pending'; else icons" style="width: 16px;"
                            src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnN2Z2pzPSJodHRwOi8vc3ZnanMuY29tL3N2Z2pzIiB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgeD0iMCIgeT0iMCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTIiIHhtbDpzcGFjZT0icHJlc2VydmUiIGNsYXNzPSIiPjxnPgo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGQ9Ik0yNTYsMEMxMTQuNjE1LDAsMCwxMTQuNjE1LDAsMjU2czExNC42MTUsMjU2LDI1NiwyNTZzMjU2LTExNC42MTUsMjU2LTI1NlMzOTcuMzg1LDAsMjU2LDB6IE0yNTYsNDgwICAgICBDMTMyLjI4OCw0ODAsMzIsMzc5LjcxMiwzMiwyNTZTMTMyLjI4OCwzMiwyNTYsMzJzMjI0LDEwMC4yODgsMjI0LDIyNFMzNzkuNzEyLDQ4MCwyNTYsNDgweiIgZmlsbD0iIzA0YTNlMSIgZGF0YS1vcmlnaW5hbD0iIzAwMDAwMCIgc3R5bGU9IiIgY2xhc3M9IiI+PC9wYXRoPgoJCQk8Y2lyY2xlIGN4PSIyNTYiIGN5PSIyNTYiIHI9IjMyIiBmaWxsPSIjMDRhM2UxIiBkYXRhLW9yaWdpbmFsPSIjMDAwMDAwIiBzdHlsZT0iIiBjbGFzcz0iIj48L2NpcmNsZT4KCQkJPGNpcmNsZSBjeD0iMzY4IiBjeT0iMjU2IiByPSIzMiIgZmlsbD0iIzA0YTNlMSIgZGF0YS1vcmlnaW5hbD0iIzAwMDAwMCIgc3R5bGU9IiIgY2xhc3M9IiI+PC9jaXJjbGU+CgkJCTxjaXJjbGUgY3g9IjE0NCIgY3k9IjI1NiIgcj0iMzIiIGZpbGw9IiMwNGEzZTEiIGRhdGEtb3JpZ2luYWw9IiMwMDAwMDAiIHN0eWxlPSIiIGNsYXNzPSIiPjwvY2lyY2xlPgoJCTwvZz4KCTwvZz4KPC9nPgo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8L2c+CjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjwvZz4KPGcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPC9nPgo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8L2c+CjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjwvZz4KPGcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPC9nPgo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8L2c+CjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjwvZz4KPGcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPC9nPgo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8L2c+CjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjwvZz4KPGcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPC9nPgo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8L2c+CjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjwvZz4KPGcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPC9nPgo8L2c+PC9zdmc+" />
                        <ng-template #icons>
                            <i [ngClass]="affiliation.attested == true ? 'fa fa-check-circle text-success' : 'fa fa-exclamation-circle red'"
                                data-mdb-toggle="tooltip" title={{affiliation.note}}></i>
                        </ng-template> -->
                    </dd>
                    <dt class="fs-7 text-grey-color">Affiliation Number</dt>
                    <dd>{{institute?.affiliation[0]?.affiliationNumber}}
                        <!-- <img *ngIf="affiliations.attested == 'pending'; else icons" style="width: 16px;"
                            src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnN2Z2pzPSJodHRwOi8vc3ZnanMuY29tL3N2Z2pzIiB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgeD0iMCIgeT0iMCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTIiIHhtbDpzcGFjZT0icHJlc2VydmUiIGNsYXNzPSIiPjxnPgo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGQ9Ik0yNTYsMEMxMTQuNjE1LDAsMCwxMTQuNjE1LDAsMjU2czExNC42MTUsMjU2LDI1NiwyNTZzMjU2LTExNC42MTUsMjU2LTI1NlMzOTcuMzg1LDAsMjU2LDB6IE0yNTYsNDgwICAgICBDMTMyLjI4OCw0ODAsMzIsMzc5LjcxMiwzMiwyNTZTMTMyLjI4OCwzMiwyNTYsMzJzMjI0LDEwMC4yODgsMjI0LDIyNFMzNzkuNzEyLDQ4MCwyNTYsNDgweiIgZmlsbD0iIzA0YTNlMSIgZGF0YS1vcmlnaW5hbD0iIzAwMDAwMCIgc3R5bGU9IiIgY2xhc3M9IiI+PC9wYXRoPgoJCQk8Y2lyY2xlIGN4PSIyNTYiIGN5PSIyNTYiIHI9IjMyIiBmaWxsPSIjMDRhM2UxIiBkYXRhLW9yaWdpbmFsPSIjMDAwMDAwIiBzdHlsZT0iIiBjbGFzcz0iIj48L2NpcmNsZT4KCQkJPGNpcmNsZSBjeD0iMzY4IiBjeT0iMjU2IiByPSIzMiIgZmlsbD0iIzA0YTNlMSIgZGF0YS1vcmlnaW5hbD0iIzAwMDAwMCIgc3R5bGU9IiIgY2xhc3M9IiI+PC9jaXJjbGU+CgkJCTxjaXJjbGUgY3g9IjE0NCIgY3k9IjI1NiIgcj0iMzIiIGZpbGw9IiMwNGEzZTEiIGRhdGEtb3JpZ2luYWw9IiMwMDAwMDAiIHN0eWxlPSIiIGNsYXNzPSIiPjwvY2lyY2xlPgoJCTwvZz4KCTwvZz4KPC9nPgo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8L2c+CjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjwvZz4KPGcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPC9nPgo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8L2c+CjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjwvZz4KPGcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPC9nPgo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8L2c+CjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjwvZz4KPGcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPC9nPgo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8L2c+CjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjwvZz4KPGcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPC9nPgo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8L2c+CjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjwvZz4KPGcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPC9nPgo8L2c+PC9zdmc+" />
                        <ng-template #icons>
                            <i [ngClass]="affiliations.attested == true ? 'fa fa-check-circle text-success' : 'fa fa-exclamation-circle red'"
                                data-mdb-toggle="tooltip" title={{affiliations.note}}></i>
                        </ng-template> -->
                    </dd>
                </dl>
                <dl *ngIf="institute?.affiliation[0]?.grantYear || institute?.affiliation[0]?.expiryYear">
                    <dt class="fs-7 text-grey-color">Grant Year </dt>
                    <dd>{{institute?.affiliation[0]?.grantYear}}
                    </dd>
                    <ng-template [ngIf]="institute?.affiliation[0]?.expiryYear">
                        <dt class="fs-7 text-grey-color">Expiry Year</dt>
                        <dd>{{institute?.affiliation[0]?.expiryYear}}
                        </dd>
                    </ng-template>
                </dl>
                <ng-template [ngIf]="institute?.affiliation[0]?.classes?.length">
                    <dt class="fs-7 text-grey-color">classes</dt>
                    <dd>{{institute?.affiliation[0]?.classes.join(', ')}}
                    </dd>
                </ng-template>

            </div>
        </div>
    </ng-template>
</div>

<!-- Add Affiliation -->
<div class="modal right fade" id="addAffiliation" tabindex="-1" role="dialog" aria-labelledby="AddAffiliation">
    <div class="modal-dialog" role="document">
        <div class="modal-content">

            <div class="modal-header">
                <h5 class="modal-title" id="myModalLabel2">Add Affiliation</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
            </div>

            <div class="modal-body">
                <div *ngIf="affiliationSchema">
                    <json-schema-form [schema]="affiliationSchema" [layout]="form" framework="bootstrap-4"
                        (onSubmit)="onAffiliationSubmit($event)">
                    </json-schema-form>
                </div>
            </div>

        </div>
    </div>
</div>

<!-- Edit Personal Details Modal -->
<div class="modal right fade right-l-modal" id="editProfile" tabindex="-1" role="dialog"
    aria-labelledby="myModalLabel2">
    <div class="modal-dialog" role="document">
        <div class="modal-content h-100vh">

            <div class="modal-header">
                <h5 class="modal-title" id="myModalLabel2">Edit Institute Details</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
            </div>

            <div class="modal-body h-100">
                <div *ngIf="editSchema">
                    <json-schema-form [schema]="editSchema" [data]='item' [layout]="form" framework="bootstrap-4"
                        (onSubmit)="onEditProfileSubmit($event)">
                    </json-schema-form>
                </div>

            </div>

        </div>
    </div>
</div>